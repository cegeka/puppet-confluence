#!/bin/sh
#
# Confluence does not have an API call to get the running version.
#
# This is the best I can come up with right now. It needs to be replaced
# with a better solution.
#
# Facts: 
#   - confluence_version
#
#VERSION=`ps -ef|grep Dcatalina.home=| egrep -o 'Dcatalina.home=.*([0-9.]{1,}) '|grep -o '......$'|tr -d '[[:space:]]'|grep -Po '(?<=divider-bin-)[^;]+'`
VERSION=`ps -ef|grep Dcatalina.home=| egrep -o 'Dcatalina.home=.*atlassian-confluence-([0-9.]{1,}) '| perl -pe '($_)=/([0-9]+([.][0-9]+)+)/'`
echo "confluence_version=${VERSION}"
